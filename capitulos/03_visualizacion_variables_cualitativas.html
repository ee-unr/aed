<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>7&nbsp; Visualización de Variables Cualitativas – Análisis Exploratorio de Datos</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../capitulos/04.html" rel="next">
<link href="../capitulos/03_georreferencia.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-b53751a350365c71b6c909e95f209ed1.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-7dc4809af68284bc67e7de96a4bd5e3c.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-83123365b82d3e0a114b8a4caf34d831.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>
<link href="../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="../site_libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../webexercises/webex.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../capitulos/03.html">Unidad 3. Cuali</a></li><li class="breadcrumb-item"><a href="../capitulos/03_visualizacion_variables_cualitativas.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Visualización de Variables Cualitativas</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Buscar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Análisis Exploratorio de Datos</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/ee-unr/aed" title="Ejecutar el código" class="quarto-navigation-tool px-1" aria-label="Ejecutar el código"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Alternar modo oscuro"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Buscar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bienvenida</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../capitulos/00_info.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Información general sobre la asignatura</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../capitulos/01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unidad 1. Introducción</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../capitulos/01_teoria_de_la_visualizacion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Teoría de la Visualización</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../capitulos/01_buenas_practicas_visualizacion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Buenas Prácticas para la Visualización de Datos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../capitulos/01_introduccion_a_ggplot2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introducción a <code>ggplot2</code></span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../capitulos/02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unidad 2. R Markdown</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../capitulos/02_Rmarkdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Comunicación de Resultados: R Markdown</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../capitulos/02_reportes_parametrizados.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Comunicación de Resultados: Reportes Parametrizados</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../capitulos/03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unidad 3. Cuali</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../capitulos/03_georreferencia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Georreferencia</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../capitulos/03_visualizacion_variables_cualitativas.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Visualización de Variables Cualitativas</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../capitulos/04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unidad 4. Cuanti</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../capitulos/04_visualizacion_variables_cuantitativas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Unidad 4 - Visualización de Variables Cuantitativas</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../capitulos/05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Unidad 5. Shiny</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../capitulos/05_shiny.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Comunicación de Resultados: Shiny</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../capitulos/05_tableros.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Tableros</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../capitulos/05_reactividad.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Reactividad</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../capitulos/05_publicar.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Publicar</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Tabla de contenidos</h2>
   
  <ul>
  <li><a href="#introducción" id="toc-introducción" class="nav-link active" data-scroll-target="#introducción"><span class="header-section-number">7.1</span> Introducción</a>
  <ul class="collapse">
  <li><a href="#datos-titanic" id="toc-datos-titanic" class="nav-link" data-scroll-target="#datos-titanic"><span class="header-section-number">7.1.1</span> Datos Titanic</a></li>
  </ul></li>
  <li><a href="#barras" id="toc-barras" class="nav-link" data-scroll-target="#barras"><span class="header-section-number">7.2</span> Barras</a>
  <ul class="collapse">
  <li><a href="#univariadas" id="toc-univariadas" class="nav-link" data-scroll-target="#univariadas"><span class="header-section-number">7.2.1</span> Univariadas</a></li>
  <li><a href="#bivariadas" id="toc-bivariadas" class="nav-link" data-scroll-target="#bivariadas"><span class="header-section-number">7.2.2</span> Bivariadas</a></li>
  <li><a href="#ejercicio" id="toc-ejercicio" class="nav-link" data-scroll-target="#ejercicio"><span class="header-section-number">7.2.3</span> Ejercicio</a></li>
  </ul></li>
  <li><a href="#tortas" id="toc-tortas" class="nav-link" data-scroll-target="#tortas"><span class="header-section-number">7.3</span> Tortas</a></li>
  <li><a href="#mosaicos" id="toc-mosaicos" class="nav-link" data-scroll-target="#mosaicos"><span class="header-section-number">7.4</span> Mosaicos</a>
  <ul class="collapse">
  <li><a href="#independencia" id="toc-independencia" class="nav-link" data-scroll-target="#independencia"><span class="header-section-number">7.4.1</span> Independencia</a></li>
  <li><a href="#más-de-2-variables" id="toc-más-de-2-variables" class="nav-link" data-scroll-target="#más-de-2-variables"><span class="header-section-number">7.4.2</span> Más de 2 variables</a></li>
  <li><a href="#usando-ggplot2" id="toc-usando-ggplot2" class="nav-link" data-scroll-target="#usando-ggplot2"><span class="header-section-number">7.4.3</span> Usando <code>ggplot2</code></a></li>
  </ul></li>
  <li><a href="#alluvial" id="toc-alluvial" class="nav-link" data-scroll-target="#alluvial"><span class="header-section-number">7.5</span> Alluvial</a></li>
  <li><a href="#treemaps" id="toc-treemaps" class="nav-link" data-scroll-target="#treemaps"><span class="header-section-number">7.6</span> Treemaps</a>
  <ul class="collapse">
  <li><a href="#treemaps-dinámicos" id="toc-treemaps-dinámicos" class="nav-link" data-scroll-target="#treemaps-dinámicos"><span class="header-section-number">7.6.1</span> Treemaps dinámicos</a></li>
  <li><a href="#ejercicio-1" id="toc-ejercicio-1" class="nav-link" data-scroll-target="#ejercicio-1"><span class="header-section-number">7.6.2</span> Ejercicio</a></li>
  </ul></li>
  <li><a href="#diagramas-de-venn" id="toc-diagramas-de-venn" class="nav-link" data-scroll-target="#diagramas-de-venn"><span class="header-section-number">7.7</span> Diagramas de Venn</a>
  <ul class="collapse">
  <li><a href="#proporciones-anidadas" id="toc-proporciones-anidadas" class="nav-link" data-scroll-target="#proporciones-anidadas"><span class="header-section-number">7.7.1</span> Proporciones anidadas</a></li>
  <li><a href="#características-compartidas-entre-individuos" id="toc-características-compartidas-entre-individuos" class="nav-link" data-scroll-target="#características-compartidas-entre-individuos"><span class="header-section-number">7.7.2</span> Características compartidas entre individuos</a></li>
  </ul></li>
  <li><a href="#nubes-de-palabras" id="toc-nubes-de-palabras" class="nav-link" data-scroll-target="#nubes-de-palabras"><span class="header-section-number">7.8</span> Nubes de Palabras</a>
  <ul class="collapse">
  <li><a href="#frecuencias-y-nubes-de-palabras" id="toc-frecuencias-y-nubes-de-palabras" class="nav-link" data-scroll-target="#frecuencias-y-nubes-de-palabras"><span class="header-section-number">7.8.1</span> Frecuencias y nubes de palabras</a></li>
  <li><a href="#co-ocurrencia-asociación-entre-palabras-y-grafos" id="toc-co-ocurrencia-asociación-entre-palabras-y-grafos" class="nav-link" data-scroll-target="#co-ocurrencia-asociación-entre-palabras-y-grafos"><span class="header-section-number">7.8.2</span> Co-ocurrencia, asociación entre palabras y grafos</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/ee-unr/aed/edit/main/capitulos/03_visualizacion_variables_cualitativas.qmd" class="toc-action"><i class="bi bi-github"></i>Editar esta página</a></li><li><a href="https://github.com/ee-unr/aed/issues/new" class="toc-action"><i class="bi empty"></i>Informar de un problema</a></li><li><a href="https://github.com/ee-unr/aed/blob/main/capitulos/03_visualizacion_variables_cualitativas.qmd" class="toc-action"><i class="bi empty"></i>Ver el código</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../capitulos/03.html">Unidad 3. Cuali</a></li><li class="breadcrumb-item"><a href="../capitulos/03_visualizacion_variables_cualitativas.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Visualización de Variables Cualitativas</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Visualización de Variables Cualitativas</span></h1>
<p class="subtitle lead">Análisis Exploratorio de Datos | Licenciatura en Estadística | FCEyE | UNR</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- themes: https://bootswatch.com/ -->
<style>
body {
text-align: justify}
</style>
<section id="introducción" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="introducción"><span class="header-section-number">7.1</span> Introducción</h2>
<ul>
<li><p>En esta unidad vamos a repasar gráficos útiles para visualizar y resumir <strong>variables categóricas</strong>.</p></li>
<li><p>Paquetes de R necesarios para reproducir los ejemplos:</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Lectura y manipulación de datos</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Gráficos Varios</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vcd)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggalluvial)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(treemapify)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co">#Diagramas de Venn</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(grid)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggvenn)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(VennDiagram)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co">#Nubes de Palabras</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(widyr)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggwordcloud)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="datos-titanic" class="level3" data-number="7.1.1">
<h3 data-number="7.1.1" class="anchored" data-anchor-id="datos-titanic"><span class="header-section-number">7.1.1</span> Datos Titanic</h3>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../imagenes/unidad03/RMS_Titanic_3.jpg" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="../imagenes/unidad03/RMS_Titanic_3.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></a></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>El famoso transatlántico <strong>Titanic</strong> se hundió en abril de 1912 durante su viaje inaugural. El conjunto de datos <code>Titanic</code> del paquete de R Base <code>datasets</code> contiene información sobre qué pasajeros/as sobrevivieron a la tragedia y cuáles no, desagregada según edad, género y clase en la que viajaban.</p></li>
<li><p>Vemos los datos en R:</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(Titanic)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Class    Sex   Age Survived Freq
1    1st   Male Child       No    0
2    2nd   Male Child       No    0
3    3rd   Male Child       No   35
4   Crew   Male Child       No    0
5    1st Female Child       No    0
6    2nd Female Child       No    0
7    3rd Female Child       No   17
8   Crew Female Child       No    0
9    1st   Male Adult       No  118
10   2nd   Male Adult       No  154
11   3rd   Male Adult       No  387
12  Crew   Male Adult       No  670
13   1st Female Adult       No    4
14   2nd Female Adult       No   13
15   3rd Female Adult       No   89
16  Crew Female Adult       No    3
17   1st   Male Child      Yes    5
18   2nd   Male Child      Yes   11
19   3rd   Male Child      Yes   13
20  Crew   Male Child      Yes    0
21   1st Female Child      Yes    1
22   2nd Female Child      Yes   13
23   3rd Female Child      Yes   14
24  Crew Female Child      Yes    0
25   1st   Male Adult      Yes   57
26   2nd   Male Adult      Yes   14
27   3rd   Male Adult      Yes   75
28  Crew   Male Adult      Yes  192
29   1st Female Adult      Yes  140
30   2nd Female Adult      Yes   80
31   3rd Female Adult      Yes   76
32  Crew Female Adult      Yes   20</code></pre>
</div>
</div>
<p>
</p>
<ul>
<li>A continuación emplearemos esta base de datos para practicar la creación de diversos tipos de gráficos.</li>
</ul>
</section>
</section>
<section id="barras" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="barras"><span class="header-section-number">7.2</span> Barras</h2>
<section id="univariadas" class="level3" data-number="7.2.1">
<h3 data-number="7.2.1" class="anchored" data-anchor-id="univariadas"><span class="header-section-number">7.2.1</span> Univariadas</h3>
<ul>
<li><p>Una de las alternativas más populares para explorar variables cualitativas son los <strong>gráficos de barras</strong>. El alto de cada rectángulo representa la frecuencia (absoluta o relativa) de las diferentes categorías que estamos comparando.</p></li>
<li><p>Estos gráficos son simples de construir e interpretar: mientras más extensa la barra, mayor frecuencia posee la categoría asociada.</p></li>
<li><p>Usando los datos del Titanic podemos armar un gráfico de barras para la variable <em>Class</em> de la siguiente manera:</p></li>
</ul>
<p><strong>Paso 1: calculamos los conteos de cada clase</strong></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>clase_titanic <span class="ot">&lt;-</span> Titanic <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Class) <span class="sc">%&gt;%</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">conteo =</span> <span class="fu">sum</span>(Freq)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>clase_titanic</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  Class conteo
  &lt;fct&gt;  &lt;dbl&gt;
1 1st      325
2 2nd      285
3 3rd      706
4 Crew     885</code></pre>
</div>
</div>
<p>
</p>
<p><strong>Paso 2: armamos el gráfico</strong></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> clase_titanic) <span class="sc">+</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> Class, <span class="at">y =</span> conteo) <span class="sc">+</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-5-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Es importante remarcar que <code>ggplot2</code> también puede armar este tipo de gráficos a partir de datos <strong>crudos</strong> (desagregados). Si hubiésemos tenido una base de datos con una fila para cada pasajero del Titanic, el código para generar el gráfico de barras es aún más simple que el anterior:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> titanic_desagregado) <span class="sc">+</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> Class) <span class="sc">+</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>Notemos que en este caso no es necesario agregar en el mapeo la variable <code>y</code>, asociada a la frecuencia de cada categoría. Además, dentro de <code>geom_bar()</code> usamos ahora la opción por defecto (<code>stat = "count"</code>), mientras que antes debíamos indicar el uso de <code>stat = "identity"</code>.</p></li>
<li><p>La decisión entre usar datos agregados o desagregados no impacta en el resultado final, y depende casi exclusivamente del formato de la base de datos con la que estemos trabajando.</p></li>
</ul>
<section id="colores" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="colores">Colores</h4>
<ul>
<li><p>Un retoque que podemos incluir consiste en agregar una paleta de colores que remarque las diferencias entre categorías.</p></li>
<li><p>En general se asocian colores oscuros a categorías más frecuentes, y colores claros a categorías menos populares:</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> clase_titanic) <span class="sc">+</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> Class, <span class="at">y =</span> conteo, <span class="at">fill =</span> conteo) <span class="sc">+</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_continuous</span>(<span class="at">low =</span> <span class="st">"lightgreen"</span>, <span class="at">high =</span> <span class="st">"darkgreen"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-7-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
<ul>
<li>En ocasiones, el color puede estar asociado a la categoría y no a su frecuencia (este caso sólo responde a cuestiones estéticas, ya que el color no aporta ninguna nueva información):</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> clase_titanic) <span class="sc">+</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> Class, <span class="at">y =</span> conteo, <span class="at">fill =</span> Class) <span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-8-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="frecuencias-relativas" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="frecuencias-relativas">Frecuencias Relativas</h4>
<ul>
<li><p>Una alternativa común consiste en graficar proporciones o porcentajes en lugar de frecuencias absolutas.</p></li>
<li><p>El cálculo de las proporciones correspondientes puede hacerse de antemano (es decir, al momento en que generamos el dataset <code>clase_titanic</code>) o bien dentro del mapeo estético, como vemos a continuación:</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> clase_titanic) <span class="sc">+</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> Class, <span class="at">y =</span> conteo<span class="sc">/</span><span class="fu">sum</span>(conteo)) <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Porcentaje"</span>, <span class="at">labels =</span> scales<span class="sc">::</span>percent)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-9-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
<ul>
<li><strong>Aclaración:</strong> la función <code>percent()</code> del paquete <code>scales</code> aplica el formato necesario al eje vertical para que la escala figure en porcentajes.</li>
</ul>
</section>
<section id="reordenamiento" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="reordenamiento">Reordenamiento</h4>
<ul>
<li><p>Si la variable en estudio es de tipo <code>character</code>, <code>ggplot2</code> emplea el orden alfabético de las categorías para graficar las barras. En caso de que la variable sea de tipo <code>factor</code>, el orden utilizado respeta el ordenamiento de sus niveles.</p></li>
<li><p>Sin embargo, en varias ocasiones vamos a preferir un orden personalizado, ya sea porque no nos convence el orden alfabético, o los niveles del factor no siguen un orden lógico, o preferimos mostrar las categorías según su frecuencia, etc.</p></li>
<li><p>La manera más directa de modificar el orden en que se muestran las barras es convirtiendo la variable a <code>factor</code> y asignando el orden deseado a los niveles. Veamos un ejemplo donde el orden depende de la frecuencia observada:</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>clase_titanic <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(conteo)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Factor con niveles ordenados según frecuencia</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Class =</span> <span class="fu">factor</span>(Class, <span class="at">levels =</span> <span class="fu">unique</span>(Class))) <span class="sc">%&gt;%</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> Class, <span class="at">y =</span> conteo) <span class="sc">+</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-10-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="etiquetas" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="etiquetas">Etiquetas</h4>
<ul>
<li><p>Otro agregado común consiste en incluir una etiqueta con el valor asociado a cada barra, reforzando así el mensaje visual y eliminando la necesidad de mostrar la tabla de frecuencias de la variable graficada.</p></li>
<li><p>Esto se logra aplicando la capa <code>geom_label()</code>:</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> clase_titanic) <span class="sc">+</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> Class, <span class="at">y =</span> conteo) <span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>(</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> conteo), <span class="co">#texto a mostrar en cada barra (en este caso, el conteo)</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">vjust =</span> <span class="dv">1</span>, <span class="co">#justificacion vertical, en este caso arriba de todo</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">5</span>, <span class="co">#tamaño de la etiqueta</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="co">#color de fondo</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"white"</span> <span class="co">#color del texto</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-11-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="bivariadas" class="level3" data-number="7.2.2">
<h3 data-number="7.2.2" class="anchored" data-anchor-id="bivariadas"><span class="header-section-number">7.2.2</span> Bivariadas</h3>
<ul>
<li>Para ejemplificar los gráficos de barras bivariados vamos a agregar al análisis la variable <em>Sex</em> del dataset Titanic:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>titanic_bivariado <span class="ot">&lt;-</span> Titanic <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Class, Sex) <span class="sc">%&gt;%</span> </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">conteo =</span> <span class="fu">sum</span>(Freq)) <span class="sc">%&gt;%</span> </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>titanic_bivariado</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 3
  Class Sex    conteo
  &lt;fct&gt; &lt;fct&gt;   &lt;dbl&gt;
1 1st   Male      180
2 1st   Female    145
3 2nd   Male      179
4 2nd   Female    106
5 3rd   Male      510
6 3rd   Female    196
7 Crew  Male      862
8 Crew  Female     23</code></pre>
</div>
</div>
<section id="barras-apiladas" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="barras-apiladas">Barras Apiladas</h4>
<ul>
<li><p>Una manera de visualizar dos variables categóricas al mismo tiempo es a través de un gráfico de <strong>barras apiladas</strong>.</p></li>
<li><p>En estos casos cada barra se subdivide en las categorías de la segunda variable, siendo las alturas proporcionales a la cantidad de individuos que presentan ambas características a la vez.</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> titanic_bivariado) <span class="sc">+</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> Class, <span class="at">fill =</span> Sex, <span class="at">y =</span> conteo) <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-13-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>En este gráfico, cada subdivisión de la barra posee un alto igual al de su frecuencia absoluta.</p></li>
<li><p>Una alternativa mucho más conveniente, utilizada sobre todo cuando los tamaños de muestra entre grupos son muy disímiles, consiste en fijar el alto total de cada barra en 100% y calcular las alturas de las subdivisiones como proporciones intra-grupo.</p></li>
<li><p>En R esto se logra añadiendo la opción <code>position = "fill"</code>:</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> titanic_bivariado) <span class="sc">+</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> Class, <span class="at">fill =</span> Sex, <span class="at">y =</span> conteo) <span class="sc">+</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"fill"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-14-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Importante">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Importante
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>En caso de existir una relación de explicativa y respuesta entre las variables graficadas, por convención se ubica la explicativa en el eje horizontal, mientras que la respuesta se asocia a los diferentes colores de cada barra.</p></li>
<li><p>En estos casos se asume que el interés está enfocado en visualizar la <strong>distribución condicional</strong> de Y dado X.</p></li>
</ul>
</div>
</div>
</section>
<section id="barras-lado-a-lado" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="barras-lado-a-lado">Barras lado a lado</h4>
<ul>
<li>Si no nos gustan las barras apiladas, podemos construir nuestro gráfico con barras contiguas (<code>position = "dodge"</code>):</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> titanic_bivariado) <span class="sc">+</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> Class, <span class="at">fill =</span> Sex, <span class="at">y =</span> conteo) <span class="sc">+</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-15-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Esta manera de visualizar los datos es recomendable únicamente cuando los tamaños de muestra entre grupos son similares, y la cantidad posible de combinaciones entre niveles de ambas variables (es decir, la cantidad de barras) no resulte demasiado alta.</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled" title="Importante">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Importante
</div>
</div>
<div class="callout-body-container callout-body">
<p>Cuando usamos barras lado a lado se asume que estamos interesados en visualizar la <strong>distribución conjunta</strong> de las 2 variables, a diferencia de lo que ocurre con las barras apiladas, donde nos interesa la condicional.</p>
</div>
</div>
</section>
</section>
<section id="ejercicio" class="level3" data-number="7.2.3">
<h3 data-number="7.2.3" class="anchored" data-anchor-id="ejercicio"><span class="header-section-number">7.2.3</span> Ejercicio</h3>
<ul>
<li>Aplicando los conceptos presentados en esta sección y tus conocimientos previos sobre <code>ggplot2</code>, tratar de reconstruir el siguiente gráfico:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-16-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="tortas" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="tortas"><span class="header-section-number">7.3</span> Tortas</h2>
<ul>
<li><p>Los <strong>gráficos de torta</strong> (<em>pie charts</em> en inglés), también conocidos como <strong>gráficos de sectores circulares</strong>, son una herramienta de visualización orientada a la comparación de frecuencias entre los distintos niveles de una variable categórica.</p></li>
<li><p>En este sentido, su objetivo es exactamente el mismo que el de los gráficos de barras.</p></li>
<li><p>Para su construcción se divide un círculo en tantas “porciones” como categorías tenga la variable, de tal manera que el ángulo de cada sector resulte proporcional a la cantidad de individuos correspondientes a esa categoría.</p></li>
<li><p>Si quisiéramos construir a mano un <em>pie chart</em> de la variable <em>Class</em>, debemos multiplicar cada frecuencia relativa por 360°, obteniendo así los grados de cada ángulo:</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>clase_titanic <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">prop =</span> conteo<span class="sc">/</span><span class="fu">sum</span>(conteo),</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">angulo =</span> <span class="fu">round</span>(<span class="dv">360</span> <span class="sc">*</span> prop, <span class="dv">2</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  Class conteo  prop angulo
  &lt;fct&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
1 1st      325 0.148   53.2
2 2nd      285 0.129   46.6
3 3rd      706 0.321  115. 
4 Crew     885 0.402  145. </code></pre>
</div>
</div>
<ul>
<li>En R podemos generar un gráfico de este estilo usando la misma función que antes, <code>geom_bar()</code>, pero cambiando el sistema de coordenadas (pasamos a las <em>polares</em>):</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> clase_titanic) <span class="sc">+</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> conteo, <span class="at">fill =</span> Class) <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>()</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-18-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>La pregunta que surge es, <strong>¿son realmente útiles estos gráficos?</strong></p></li>
<li><p>Veámoslo desde este punto de vista: para lograr nuestro objetivo de comparar visualmente las categorías más populares tenemos dos opciones:</p>
<ol type="1">
<li>Armar un gráfico de barras, donde la <strong>longitud</strong> de cada barra corresponde a la frecuencia absoluta o relativa registradas en esa categoría.</li>
<li>Armar un gráfico de torta, donde el <strong>ángulo</strong> de cada sector es proporcional a la cantidad de respuestas en esa categoría.</li>
</ol></li>
</ul>
<p>
</p>
<ul>
<li><p>Creemos que nadie en su sano juicio preferiría la opción 2 en lugar de la 1.</p></li>
<li><p>Si esto les parece exagerado, traten de ordenar las categorías desde la más hasta la menos frecuente mirando el siguiente par de gráficos. ¿Con cuál de los dos resulta más fácil hacer comparaciones?</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-19-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="mosaicos" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="mosaicos"><span class="header-section-number">7.4</span> Mosaicos</h2>
<ul>
<li><p>Los gráficos de mosaico son alternativas a los gráficos de barras bivariados. La principal diferencia entre ambos es que, en los <strong>mosaicos</strong>, el ancho de las barras es variable y depende de la frecuencia de cada categoría ubicada sobre el eje horizontal.</p></li>
<li><p>Retomando los datos de Titanic, supongamos que deseamos estudiar la relación entre género del pasajero y supervivencia al hundimiento.</p></li>
<li><p>Construimos una tabla de contingencia y obtenemos el siguiente resultado:</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code> Survived Male Female Total
       No 1364    126  1490
      Yes  367    344   711
    Total 1731    470  2201</code></pre>
</div>
</div>
<p>
</p>
<ul>
<li>Para trasladar esta información a un gráfico de mosaico empleamos el paquete <code>vcd</code>:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vcd)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mosaic</span>(</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="sc">~</span> Sex <span class="sc">+</span> Survived, </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> Titanic, </span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">direction =</span> <span class="st">"v"</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-21-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>En este tipo de visualizaciones, el área de cada rectángulo puede interpretarse de dos maneras diferentes:</p>
<ul>
<li>Distribución conjunta: el porcentaje de área que ocupa el rectángulo asociado a las categorías <span class="math inline">\(\left( X_i, Y_j \right)\)</span>, con respecto al gráfico entero, coincide con la proporción de individuos en la base que comparten las características <span class="math inline">\(\left( X_i, Y_j \right)\)</span>.</li>
<li>Distribución condicional: el porcentaje de área que ocupa el rectángulo asociado a las categorías <span class="math inline">\(\left( X_i, Y_j \right)\)</span>, dentro de la columna donde se encuentra, coincide con la proporción de individuos de la categoría <span class="math inline">\(X_i\)</span> que poseen la característica <span class="math inline">\(Y_j\)</span>.</li>
</ul></li>
</ul>
<p>
</p>
<ul>
<li><p>Por ejemplo, el área del rectángulo mayor (varones que no sobrevivieron) ocupa el <span class="math inline">\(1364/2201 \approx 62\%\)</span> del área total y, al mismo tiempo, ocupa el <span class="math inline">\(1364/1731 \approx 79\%\)</span> de la columna izquierda.</p></li>
<li><p>En términos probabilísticos, los anchos de los rectángulos son estimaciones de las probabilidades marginales <span class="math inline">\(P(sexo_i)\)</span>, mientras que las alturas son estimaciones de las probabilidades condicionales <span class="math inline">\(P(sobrevive_j / sexo_i)\)</span>.</p></li>
<li><p>Por lo tanto, el área de cada rectángulo representa una estimación de la probabilidad conjunta:</p></li>
</ul>
<p><span class="math display">\[
base \times altura = P(sexo_i) \times P(sobrevive_j / sexo_i) = P(sexo_i \cap sobrevive_j)
\]</span></p>
<ul>
<li>Podemos agregar una paleta de colores para una de las dos variables graficadas, de la siguiente manera:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mosaic</span>(</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="sc">~</span> Sex <span class="sc">+</span> Survived, </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> Titanic, </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">direction =</span> <span class="st">"v"</span>, </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">highlighting =</span> <span class="st">"Survived"</span>,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">highlighting_fill =</span> <span class="fu">c</span>(<span class="st">"red"</span>, <span class="st">"green"</span>)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-22-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-15"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
<section id="independencia" class="level3" data-number="7.4.1">
<h3 data-number="7.4.1" class="anchored" data-anchor-id="independencia"><span class="header-section-number">7.4.1</span> Independencia</h3>
<ul>
<li><p>Otra manera de colorear los mosaicos es a partir de los residuos que se obtienen al tratar de ajustar un modelo de independencia a los datos.</p></li>
<li><p>Recordemos que en el Test de Independencia Chi-Cuadrado para tablas de contingencia, el valor esperado de cada celda bajo la hipótesis nula es: <span class="math display">\[E_{ij} = \dfrac{n_{i.} \times n_{.j}}{n}\]</span> es decir, se calcula como el producto entre los totales de su respectiva fila y columna, dividido por el total de individuos en la muestra.</p></li>
<li><p>A partir de este supuesto de independencia, la función <code>mosaic()</code> calcula los residuos de Pearson: <span class="math display">\[r_{ij}=\dfrac{n_{ij} - E_{ij}}{\sqrt{E_{ij}}}\]</span>.</p></li>
<li><p>Utilizando estos residuos se obtiene la estadística <span class="math inline">\(\chi^2 = \sum\limits_{ij} r_{ij}^2\)</span>, la cual se utiliza para llevar a cabo el test de independencia.</p></li>
<li><p>La coloración de mosaicos en base a estos residuos se agrega mediante el argumento <code>shade</code>:</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mosaic</span>(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="sc">~</span> Sex <span class="sc">+</span> Survived, </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> Titanic, </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">direction =</span> <span class="st">"v"</span>, </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">shade =</span> <span class="cn">TRUE</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-23-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-16"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>Observamos que el p-value asociado al test es prácticamente nulo, por lo tanto rechazamos la hipótesis de independencia (algo totalmente previsible dadas las características de los datos).</p></li>
<li><p>Por ejemplo, vemos que el residuo asociado a mujeres sobrevivientes es extremadamente alto, cercano a 16 unidades. Esto indica que las mujeres que viajaron en el Titanic salvaron su vida en mucha mayor proporción que la esperada bajo el supuesto de independencia.</p></li>
<li><p>Cálculo a mano del residuo:</p></li>
</ul>
<p><span class="math display">\[E_{22} = \dfrac{n_{2.} \times n_{.2}}{n} = \dfrac{470 \times 711}{2201} \approx 152\]</span></p>
<p><span class="math display">\[r_{22} = \dfrac{n_{22} - E_{22}}{\sqrt{E_{22}}} = \dfrac{344 - 152}{\sqrt{152}} \approx 15.6 \]</span></p>
</section>
<section id="más-de-2-variables" class="level3" data-number="7.4.2">
<h3 data-number="7.4.2" class="anchored" data-anchor-id="más-de-2-variables"><span class="header-section-number">7.4.2</span> Más de 2 variables</h3>
<ul>
<li><p>Si bien las interpretaciones pueden volverse algo complejas, los gráficos de mosaico permiten analizar múltiples variables al mismo tiempo.</p></li>
<li><p>Veamos qué ocurre si agregamos la variable <em>Class</em>:</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mosaic</span>(</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> <span class="sc">~</span> Sex <span class="sc">+</span> Class <span class="sc">+</span> Survived, </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> Titanic, </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">highlighting =</span> <span class="st">"Survived"</span>, </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">highlighting_fill =</span> <span class="fu">c</span>(<span class="st">"red"</span>, <span class="st">"green"</span>)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-24-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-17"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="usando-ggplot2" class="level3" data-number="7.4.3">
<h3 data-number="7.4.3" class="anchored" data-anchor-id="usando-ggplot2"><span class="header-section-number">7.4.3</span> Usando <code>ggplot2</code></h3>
<ul>
<li>Los gráficos de mosaico también pueden generarse a partir de <code>ggplot2</code>, aunque el código necesario puede llegar a ser algo extenso:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>mosaico_gg <span class="ot">&lt;-</span> Titanic <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Sex, Survived) <span class="sc">%&gt;%</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">conteo =</span> <span class="fu">sum</span>(Freq), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Sex) <span class="sc">%&gt;%</span> </span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">ancho =</span> <span class="fu">sum</span>(conteo), </span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">alto =</span> conteo <span class="sc">/</span> ancho,</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="dv">1</span> <span class="sc">-</span> (<span class="fu">cumsum</span>(conteo) <span class="sc">-</span> <span class="fl">0.5</span> <span class="sc">*</span> conteo) <span class="sc">/</span> ancho,</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mosaico_gg) <span class="sc">+</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> Sex, <span class="at">y =</span> alto, <span class="at">width =</span> ancho, <span class="at">fill =</span> Survived) <span class="sc">+</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"fill"</span>, <span class="at">colour =</span> <span class="st">"white"</span>, <span class="at">linewidth =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">label =</span> conteo, <span class="at">y =</span> y), <span class="at">size =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span> Sex, <span class="at">scales =</span> <span class="st">"free_x"</span>, <span class="at">space =</span> <span class="st">"free_x"</span>) <span class="sc">+</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#fc2246"</span>, <span class="st">"#55df42"</span>)) <span class="sc">+</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Survived"</span>,</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), </span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> mosaico_gg<span class="sc">$</span>y[mosaico_gg<span class="sc">$</span>Sex <span class="sc">==</span> <span class="st">"Male"</span>],</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> mosaico_gg<span class="sc">$</span>Survived[mosaico_gg<span class="sc">$</span>Sex <span class="sc">==</span> <span class="st">"Male"</span>]</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">line =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.length =</span> <span class="fu">unit</span>(<span class="dv">0</span>, <span class="st">"pt"</span>),</span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span></span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-25-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-18"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="alluvial" class="level2" data-number="7.5">
<h2 data-number="7.5" class="anchored" data-anchor-id="alluvial"><span class="header-section-number">7.5</span> Alluvial</h2>
<ul>
<li><p>Los diagramas <strong>alluvial</strong> (también conocidos como <em>parallel sets</em>) tienen un objetivo similar al de los gráficos de mosaico: representar las distribuciones conjuntas y/o condicionales entre múltiples variables categóricas.</p></li>
<li><p>La palabra <em>alluvial</em> es un término inglés relacionado a la idea de <em>aluvión</em>, es decir, un gran flujo de algo (por ejemplo aluvión de agua, de personas, etc.).</p></li>
<li><p>Estos gráficos reciben este nombre ya que las relaciones entre variables se dibujan como curvas cuyo ancho está asociado a la frecuencia observada en cada combinación de categorías, dando la sensación de “flujos” de agua que conectan grupos.</p></li>
<li><p>Para graficarlos utilizamos el paquete <code>ggalluvial</code>. Retomamos el ejemplo del Titanic:</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggalluvial)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>Titanic <span class="sc">%&gt;%</span> </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">axis1 =</span> Sex, <span class="at">axis2 =</span> Class, <span class="at">fill =</span> Survived, <span class="at">y =</span> Freq) <span class="sc">+</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_alluvium</span>() <span class="sc">+</span> <span class="co">#flujos</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>( <span class="co">#columnas</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"black"</span>, </span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"lightgrey"</span>,</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="fl">0.1</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>( <span class="co">#etiquetas</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">stat =</span> <span class="st">"stratum"</span>, </span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)),</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"white"</span>,</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">2</span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="st">"Sexo"</span>, <span class="st">"Clase"</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Frecuencias"</span>, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">2250</span>, <span class="dv">250</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-26-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-19"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>En este caso todas las alturas representan frecuencias absolutas:</p>
<ul>
<li>El alto del rectángulo ‘Female’ coincide con la cantidad total de pasajeras mujeres en el Titanic (470).</li>
<li>El alto del flujo celeste que conecta los rectángulos <code>Sexo = Female</code> y <code>Clase = 1st</code> coincide con la cantidad total de mujeres que viajaron en primera y sobrevivieron (140).</li>
</ul></li>
</ul>
<p>
</p>
<ul>
<li>Una alternativa al gráfico anterior consiste en incluir la supervivencia como una columna (estrato) más:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>Titanic <span class="sc">%&gt;%</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis1 =</span> Survived, </span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis2 =</span> Sex, </span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis3 =</span> Class,</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> Survived, </span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> Freq</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_alluvium</span>() <span class="sc">+</span> <span class="co">#flujos</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>( <span class="co">#columnas</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"black"</span>, </span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"lightgrey"</span>,</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="fl">0.15</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>( <span class="co">#etiquetas</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">stat =</span> <span class="st">"stratum"</span>, </span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum)),</span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"white"</span>,</span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">1.5</span></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span> </span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="st">"Sobrevivió"</span>, <span class="st">"Sexo"</span>, <span class="st">"Clase"</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Frecuencias"</span>, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">2250</span>, <span class="dv">250</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-27-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-20"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>Comentarios sobre el código:</p>
<ul>
<li><code>ggalluvial</code> interactúa de manera extraña con <code>ggplot2</code>, por lo tanto algunas opciones asociadas a ejes y escalas pueden no funcionar como de costumbre (recomendamos leer la <a href="https://cran.r-project.org/web/packages/ggalluvial/vignettes/ggalluvial.html">viñeta</a> del paquete).</li>
<li>Una alternativa que vale la pena mencionar es la que ofrece el paquete <code>ggforce</code> mediante su función <code>geom_parallel_sets()</code>, la cual otorga resultados similares a los de <code>ggalluvial</code>.</li>
<li>Agregando la función <code>coord_flip()</code> podemos rotar los estratos para que queden ubicados de manera horizontal en vez de vertical:</li>
</ul></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-28-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-21"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="treemaps" class="level2" data-number="7.6">
<h2 data-number="7.6" class="anchored" data-anchor-id="treemaps"><span class="header-section-number">7.6</span> Treemaps</h2>
<ul>
<li><p>Un <em>treemap</em> es un tipo de gráfico de mosaico donde el área de cada rectángulo se asocia a su frecuencia, o bien a otra variable numérica de interés.</p></li>
<li><p>Esta dualidad permite que utilicemos treemaps tanto para variables respuesta categóricas (área = frecuencia) como para respuestas numéricas (área = total en cada grupo).</p></li>
<li><p>A diferencia de lo que ocurre con los mosaicos, donde todos los niveles de una variable se pueden combinar con todos los niveles de la otra variable, los treemaps pueden usarse aún cuando las subdivisiones de un grupo son completamente distintas a las subdivisiones del otro. De hecho, se los suele emplear específicamente cuando no tiene sentido mostrar todas las “cruzas” entre las categorías de las variables.</p></li>
<li><p>Al igual que en un gráfico de mosaico, en un treemap se toma un rectángulo y se lo subdivide en rectángulos más pequeños cuyas áreas representan proporciones. Sin embargo, el método por el cual se colocan los rectángulos más pequeños dentro de los más grandes es diferente: en un treemap se hace recursivamente.</p></li>
<li><p>Para ejemplificar los treemaps vamos a retomar los datos de <strong>cultivos</strong> que presentamos en clases anteriores. Veamos los cultivos con mayor producción en la provincia de Santa Fe durante 2019/20:</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>cultivos <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"../data/unidad03/cultivos.xlsx"</span>, <span class="at">na =</span> <span class="st">"-"</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>santafe <span class="ot">&lt;-</span> cultivos <span class="sc">%&gt;%</span> </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    prov <span class="sc">==</span> <span class="st">"SANTA FE"</span>, </span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    campaña <span class="sc">==</span> <span class="st">"2019/20"</span>,</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>cultivo <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Soja 1ra"</span>, <span class="st">"Soja 2da"</span>)</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cultivo) <span class="sc">%&gt;%</span> </span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">prod =</span> <span class="fu">sum</span>(prod, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(prod))</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>santafe</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 13 × 2
   cultivo         prod
   &lt;chr&gt;          &lt;dbl&gt;
 1 Soja total   9399967
 2 Maíz         7370856
 3 Trigo total  4186876
 4 Girasol       426328
 5 Sorgo         363345
 6 Arroz         149600
 7 Algodón        90440
 8 Cebada total   50272
 9 Arveja         40530
10 Avena          36545
11 Lenteja        26664
12 Maní           20800
13 Centeno          499</code></pre>
</div>
</div>
<p>
</p>
<ul>
<li>En R podemos crear un treemap de estos datos mediante el paquete <code>treemapify</code>:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(treemapify)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> santafe) <span class="sc">+</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">area =</span> prod, <span class="at">fill =</span> prod<span class="sc">/</span>(<span class="dv">10</span><span class="sc">^</span><span class="dv">6</span>), <span class="at">label =</span> cultivo) <span class="sc">+</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_treemap</span>() <span class="sc">+</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_treemap_text</span>() <span class="sc">+</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Producción</span><span class="sc">\n</span><span class="st">(millones de Tn.)"</span>) <span class="sc">+</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">"yellow"</span>, <span class="at">high =</span> <span class="st">"forestgreen"</span>, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">9</span>, <span class="dv">2</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-30-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-22"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Un problema común en este tipo de gráficos es que las categorías menos frecuentes no pueden visualizarse, tal como ocurre en este ejemplo con la cebada, la arveja, etc.</li>
</ul>
<section id="treemaps-dinámicos" class="level3" data-number="7.6.1">
<h3 data-number="7.6.1" class="anchored" data-anchor-id="treemaps-dinámicos"><span class="header-section-number">7.6.1</span> Treemaps dinámicos</h3>
<ul>
<li>Una posible solución al inconveniente mencionado arriba consiste en usar el paquete <code>plotly</code> para generar treemaps dinámicos:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">"treemap"</span>,</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> santafe<span class="sc">$</span>cultivo,</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">parents =</span> <span class="st">""</span>, </span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">values =</span> santafe<span class="sc">$</span>prod</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-d355627612b8e2ba6d82" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-d355627612b8e2ba6d82">{"x":{"visdat":{"48fc7bc9dc75":["function () ","plotlyVisDat"]},"cur_data":"48fc7bc9dc75","attrs":{"48fc7bc9dc75":{"labels":["Soja total","Maíz","Trigo total","Girasol","Sorgo","Arroz","Algodón","Cebada total","Arveja","Avena","Lenteja","Maní","Centeno"],"parents":"","values":[9399967,7370856,4186876,426328,363345,149600,90440,50272,40530,36545,26664,20800,499],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"treemap"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["Soja total","Maíz","Trigo total","Girasol","Sorgo","Arroz","Algodón","Cebada total","Arveja","Avena","Lenteja","Maní","Centeno"],"parents":["","","","","","","","","","","","",""],"values":[9399967,7370856,4186876,426328,363345,149600,90440,50272,40530,36545,26664,20800,499],"type":"treemap","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<ul>
<li><p>La utilidad de los treemaps confeccionados con <code>plotly</code> se aprecia aún más cuando agregamos otra variable al gráfico.</p></li>
<li><p>Supongamos que queremos visualizar las toneladas cosechadas de cada cultivo desagregadas según <strong>departamento</strong>.</p></li>
<li><p>En primer lugar, confeccionamos la base de datos necesaria:</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>deptos <span class="ot">&lt;-</span> cultivos <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    prov <span class="sc">==</span> <span class="st">"SANTA FE"</span>, </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    campaña <span class="sc">==</span> <span class="st">"2019/20"</span>,</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>cultivo <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Soja 1ra"</span>, <span class="st">"Soja 2da"</span>)</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(dpto, cultivo) <span class="sc">%&gt;%</span> </span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">prod =</span> <span class="fu">sum</span>(prod, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>deptos</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 134 × 3
   dpto       cultivo        prod
   &lt;chr&gt;      &lt;chr&gt;         &lt;dbl&gt;
 1 9 DE JULIO Algodón       64400
 2 9 DE JULIO Avena             0
 3 9 DE JULIO Girasol       51230
 4 9 DE JULIO Maíz         174240
 5 9 DE JULIO Soja total   269220
 6 9 DE JULIO Sorgo         29760
 7 9 DE JULIO Trigo total  233750
 8 BELGRANO   Avena          1081
 9 BELGRANO   Cebada total   6696
10 BELGRANO   Centeno         499
# ℹ 124 more rows</code></pre>
</div>
</div>
<p>
</p>
<ul>
<li>En segundo lugar, agregamos los totales por departamento y luego asignamos etiquetas únicas a cada registro de la base (en general, este es el paso más complejo del proceso). La base resultante se ve así:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>deptos_tot <span class="ot">&lt;-</span> deptos <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Calculo totales por depto</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(dpto) <span class="sc">%&gt;%</span> </span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">prod =</span> <span class="fu">sum</span>(prod, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">cultivo =</span> dpto) <span class="sc">%&gt;%</span> </span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dpto =</span> <span class="st">"Total Santa Fe"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Uno con dataset original</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(deptos) <span class="sc">%&gt;%</span> </span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Genero etiquetas únicas</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">etiq =</span> <span class="fu">ifelse</span>(dpto <span class="sc">!=</span> <span class="st">"Total Santa Fe"</span>, <span class="fu">paste0</span>(cultivo, <span class="st">"_"</span>, dpto), cultivo))</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>deptos_tot</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 153 × 4
   cultivo             prod dpto           etiq            
   &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt;           
 1 9 DE JULIO        822600 Total Santa Fe 9 DE JULIO      
 2 BELGRANO         1127600 Total Santa Fe BELGRANO        
 3 CASEROS          1541017 Total Santa Fe CASEROS         
 4 CASTELLANOS      1999437 Total Santa Fe CASTELLANOS     
 5 CONSTITUCION     1159655 Total Santa Fe CONSTITUCION    
 6 GARAY              90715 Total Santa Fe GARAY           
 7 GENERAL LOPEZ    5036462 Total Santa Fe GENERAL LOPEZ   
 8 GENERAL OBLIGADO  535935 Total Santa Fe GENERAL OBLIGADO
 9 IRIONDO          1505450 Total Santa Fe IRIONDO         
10 LA CAPITAL        148791 Total Santa Fe LA CAPITAL      
# ℹ 143 more rows</code></pre>
</div>
</div>
<ul>
<li>Ahora sí estamos en condiciones de graficar el treemap bivariado:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">'treemap'</span>,</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> deptos_tot<span class="sc">$</span>etiq, <span class="co">#variable de menor jerarquía (etiqueta única)</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">parents =</span> deptos_tot<span class="sc">$</span>dpto, <span class="co">#variable de mayor jerarquía</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">values =</span> deptos_tot<span class="sc">$</span>prod, <span class="co">#tamaño de cada rectangulo</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">hoverinfo =</span> <span class="st">"label+value+percent parent+percent root"</span>,</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">textinfo =</span> <span class="st">"label+value+percent parent+percent root"</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_trace</span>(<span class="at">branchvalues =</span> <span class="st">"total"</span>, <span class="at">name =</span> <span class="st">""</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-b262cb3b5257b01f0c61" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-b262cb3b5257b01f0c61">{"x":{"visdat":{"48fc23b065f":["function () ","plotlyVisDat"]},"cur_data":"48fc23b065f","attrs":{"48fc23b065f":{"labels":["9 DE JULIO","BELGRANO","CASEROS","CASTELLANOS","CONSTITUCION","GARAY","GENERAL LOPEZ","GENERAL OBLIGADO","IRIONDO","LA CAPITAL","LAS COLONIAS","ROSARIO","SAN CRISTOBAL","SAN JAVIER","SAN JERONIMO","SAN JUSTO","SAN LORENZO","SAN MARTIN","VERA","Algodón_9 DE JULIO","Avena_9 DE JULIO","Girasol_9 DE JULIO","Maíz_9 DE JULIO","Soja total_9 DE JULIO","Sorgo_9 DE JULIO","Trigo total_9 DE JULIO","Avena_BELGRANO","Cebada total_BELGRANO","Centeno_BELGRANO","Maíz_BELGRANO","Soja total_BELGRANO","Sorgo_BELGRANO","Trigo total_BELGRANO","Arveja_CASEROS","Avena_CASEROS","Cebada total_CASEROS","Maíz_CASEROS","Soja total_CASEROS","Sorgo_CASEROS","Trigo total_CASEROS","Avena_CASTELLANOS","Cebada total_CASTELLANOS","Girasol_CASTELLANOS","Maíz_CASTELLANOS","Soja total_CASTELLANOS","Sorgo_CASTELLANOS","Trigo total_CASTELLANOS","Arveja_CONSTITUCION","Avena_CONSTITUCION","Cebada total_CONSTITUCION","Lenteja_CONSTITUCION","Maíz_CONSTITUCION","Soja total_CONSTITUCION","Sorgo_CONSTITUCION","Trigo total_CONSTITUCION","Arroz_GARAY","Maíz_GARAY","Soja total_GARAY","Sorgo_GARAY","Arveja_GENERAL LOPEZ","Avena_GENERAL LOPEZ","Cebada total_GENERAL LOPEZ","Girasol_GENERAL LOPEZ","Maní_GENERAL LOPEZ","Maíz_GENERAL LOPEZ","Soja total_GENERAL LOPEZ","Sorgo_GENERAL LOPEZ","Trigo total_GENERAL LOPEZ","Algodón_GENERAL OBLIGADO","Avena_GENERAL OBLIGADO","Girasol_GENERAL OBLIGADO","Maíz_GENERAL OBLIGADO","Soja total_GENERAL OBLIGADO","Sorgo_GENERAL OBLIGADO","Trigo total_GENERAL OBLIGADO","Avena_IRIONDO","Cebada total_IRIONDO","Maíz_IRIONDO","Soja total_IRIONDO","Sorgo_IRIONDO","Trigo total_IRIONDO","Avena_LA CAPITAL","Girasol_LA CAPITAL","Maíz_LA CAPITAL","Soja total_LA CAPITAL","Sorgo_LA CAPITAL","Trigo total_LA CAPITAL","Avena_LAS COLONIAS","Cebada total_LAS COLONIAS","Girasol_LAS COLONIAS","Maíz_LAS COLONIAS","Soja total_LAS COLONIAS","Sorgo_LAS COLONIAS","Trigo total_LAS COLONIAS","Arveja_ROSARIO","Cebada total_ROSARIO","Lenteja_ROSARIO","Maíz_ROSARIO","Soja total_ROSARIO","Sorgo_ROSARIO","Trigo total_ROSARIO","Avena_SAN CRISTOBAL","Cebada total_SAN CRISTOBAL","Girasol_SAN CRISTOBAL","Maíz_SAN CRISTOBAL","Soja total_SAN CRISTOBAL","Sorgo_SAN CRISTOBAL","Trigo total_SAN CRISTOBAL","Algodón_SAN JAVIER","Arroz_SAN JAVIER","Avena_SAN JAVIER","Girasol_SAN JAVIER","Maíz_SAN JAVIER","Soja total_SAN JAVIER","Sorgo_SAN JAVIER","Trigo total_SAN JAVIER","Arveja_SAN JERONIMO","Avena_SAN JERONIMO","Cebada total_SAN JERONIMO","Girasol_SAN JERONIMO","Maíz_SAN JERONIMO","Soja total_SAN JERONIMO","Sorgo_SAN JERONIMO","Trigo total_SAN JERONIMO","Avena_SAN JUSTO","Cebada total_SAN JUSTO","Girasol_SAN JUSTO","Lenteja_SAN JUSTO","Maíz_SAN JUSTO","Soja total_SAN JUSTO","Sorgo_SAN JUSTO","Trigo total_SAN JUSTO","Arveja_SAN LORENZO","Avena_SAN LORENZO","Maíz_SAN LORENZO","Soja total_SAN LORENZO","Sorgo_SAN LORENZO","Trigo total_SAN LORENZO","Avena_SAN MARTIN","Cebada total_SAN MARTIN","Centeno_SAN MARTIN","Girasol_SAN MARTIN","Maíz_SAN MARTIN","Soja total_SAN MARTIN","Sorgo_SAN MARTIN","Trigo total_SAN MARTIN","Algodón_VERA","Avena_VERA","Girasol_VERA","Maíz_VERA","Soja total_VERA","Sorgo_VERA","Trigo total_VERA"],"parents":["Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","9 DE JULIO","9 DE JULIO","9 DE JULIO","9 DE JULIO","9 DE JULIO","9 DE JULIO","9 DE JULIO","BELGRANO","BELGRANO","BELGRANO","BELGRANO","BELGRANO","BELGRANO","BELGRANO","CASEROS","CASEROS","CASEROS","CASEROS","CASEROS","CASEROS","CASEROS","CASTELLANOS","CASTELLANOS","CASTELLANOS","CASTELLANOS","CASTELLANOS","CASTELLANOS","CASTELLANOS","CONSTITUCION","CONSTITUCION","CONSTITUCION","CONSTITUCION","CONSTITUCION","CONSTITUCION","CONSTITUCION","CONSTITUCION","GARAY","GARAY","GARAY","GARAY","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL OBLIGADO","GENERAL OBLIGADO","GENERAL OBLIGADO","GENERAL OBLIGADO","GENERAL OBLIGADO","GENERAL OBLIGADO","GENERAL OBLIGADO","IRIONDO","IRIONDO","IRIONDO","IRIONDO","IRIONDO","IRIONDO","LA CAPITAL","LA CAPITAL","LA CAPITAL","LA CAPITAL","LA CAPITAL","LA CAPITAL","LAS COLONIAS","LAS COLONIAS","LAS COLONIAS","LAS COLONIAS","LAS COLONIAS","LAS COLONIAS","LAS COLONIAS","ROSARIO","ROSARIO","ROSARIO","ROSARIO","ROSARIO","ROSARIO","ROSARIO","SAN CRISTOBAL","SAN CRISTOBAL","SAN CRISTOBAL","SAN CRISTOBAL","SAN CRISTOBAL","SAN CRISTOBAL","SAN CRISTOBAL","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN LORENZO","SAN LORENZO","SAN LORENZO","SAN LORENZO","SAN LORENZO","SAN LORENZO","SAN MARTIN","SAN MARTIN","SAN MARTIN","SAN MARTIN","SAN MARTIN","SAN MARTIN","SAN MARTIN","SAN MARTIN","VERA","VERA","VERA","VERA","VERA","VERA","VERA"],"values":[822600,1127600,1541017,1999437,1159655,90715,5036462,535935,1505450,148791,1404830,546155,1286031,148635,984050,780654,718009,2144771,181925,64400,0,51230,174240,269220,29760,233750,1081,6696,499,376250,530474,9100,203500,2520,0,2880,554490,759772,29475,191880,0,0,16440,431388,1030429,15680,505500,20340,0,5040,11400,335250,561055,9750,216820,75400,4935,9000,1380,750,22382,10260,600,20800,2332740,2024850,19500,604580,14400,1700,160185,153450,86490,31160,88550,1182,12660,533750,677818,6440,273600,0,5371,27750,81200,8820,25650,0,0,4226,370820,667804,9180,352800,12960,1440,14700,174445,196280,9800,136530,0,0,96442,375188,414891,63360,336150,3240,74200,750,15680,10005,20160,12600,12000,1980,8030,2048,8100,219000,449692,22200,273000,0,0,26518,564,343950,265702,20720,123200,1980,0,222755,323504,12600,157170,580,9248,0,8701,691250,982996,18200,433796,8400,840,32835,39200,48630,33620,18400],"hoverinfo":"label+value+percent parent+percent root","textinfo":"label+value+percent parent+percent root","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"treemap"},"48fc23b065f.1":{"labels":["9 DE JULIO","BELGRANO","CASEROS","CASTELLANOS","CONSTITUCION","GARAY","GENERAL LOPEZ","GENERAL OBLIGADO","IRIONDO","LA CAPITAL","LAS COLONIAS","ROSARIO","SAN CRISTOBAL","SAN JAVIER","SAN JERONIMO","SAN JUSTO","SAN LORENZO","SAN MARTIN","VERA","Algodón_9 DE JULIO","Avena_9 DE JULIO","Girasol_9 DE JULIO","Maíz_9 DE JULIO","Soja total_9 DE JULIO","Sorgo_9 DE JULIO","Trigo total_9 DE JULIO","Avena_BELGRANO","Cebada total_BELGRANO","Centeno_BELGRANO","Maíz_BELGRANO","Soja total_BELGRANO","Sorgo_BELGRANO","Trigo total_BELGRANO","Arveja_CASEROS","Avena_CASEROS","Cebada total_CASEROS","Maíz_CASEROS","Soja total_CASEROS","Sorgo_CASEROS","Trigo total_CASEROS","Avena_CASTELLANOS","Cebada total_CASTELLANOS","Girasol_CASTELLANOS","Maíz_CASTELLANOS","Soja total_CASTELLANOS","Sorgo_CASTELLANOS","Trigo total_CASTELLANOS","Arveja_CONSTITUCION","Avena_CONSTITUCION","Cebada total_CONSTITUCION","Lenteja_CONSTITUCION","Maíz_CONSTITUCION","Soja total_CONSTITUCION","Sorgo_CONSTITUCION","Trigo total_CONSTITUCION","Arroz_GARAY","Maíz_GARAY","Soja total_GARAY","Sorgo_GARAY","Arveja_GENERAL LOPEZ","Avena_GENERAL LOPEZ","Cebada total_GENERAL LOPEZ","Girasol_GENERAL LOPEZ","Maní_GENERAL LOPEZ","Maíz_GENERAL LOPEZ","Soja total_GENERAL LOPEZ","Sorgo_GENERAL LOPEZ","Trigo total_GENERAL LOPEZ","Algodón_GENERAL OBLIGADO","Avena_GENERAL OBLIGADO","Girasol_GENERAL OBLIGADO","Maíz_GENERAL OBLIGADO","Soja total_GENERAL OBLIGADO","Sorgo_GENERAL OBLIGADO","Trigo total_GENERAL OBLIGADO","Avena_IRIONDO","Cebada total_IRIONDO","Maíz_IRIONDO","Soja total_IRIONDO","Sorgo_IRIONDO","Trigo total_IRIONDO","Avena_LA CAPITAL","Girasol_LA CAPITAL","Maíz_LA CAPITAL","Soja total_LA CAPITAL","Sorgo_LA CAPITAL","Trigo total_LA CAPITAL","Avena_LAS COLONIAS","Cebada total_LAS COLONIAS","Girasol_LAS COLONIAS","Maíz_LAS COLONIAS","Soja total_LAS COLONIAS","Sorgo_LAS COLONIAS","Trigo total_LAS COLONIAS","Arveja_ROSARIO","Cebada total_ROSARIO","Lenteja_ROSARIO","Maíz_ROSARIO","Soja total_ROSARIO","Sorgo_ROSARIO","Trigo total_ROSARIO","Avena_SAN CRISTOBAL","Cebada total_SAN CRISTOBAL","Girasol_SAN CRISTOBAL","Maíz_SAN CRISTOBAL","Soja total_SAN CRISTOBAL","Sorgo_SAN CRISTOBAL","Trigo total_SAN CRISTOBAL","Algodón_SAN JAVIER","Arroz_SAN JAVIER","Avena_SAN JAVIER","Girasol_SAN JAVIER","Maíz_SAN JAVIER","Soja total_SAN JAVIER","Sorgo_SAN JAVIER","Trigo total_SAN JAVIER","Arveja_SAN JERONIMO","Avena_SAN JERONIMO","Cebada total_SAN JERONIMO","Girasol_SAN JERONIMO","Maíz_SAN JERONIMO","Soja total_SAN JERONIMO","Sorgo_SAN JERONIMO","Trigo total_SAN JERONIMO","Avena_SAN JUSTO","Cebada total_SAN JUSTO","Girasol_SAN JUSTO","Lenteja_SAN JUSTO","Maíz_SAN JUSTO","Soja total_SAN JUSTO","Sorgo_SAN JUSTO","Trigo total_SAN JUSTO","Arveja_SAN LORENZO","Avena_SAN LORENZO","Maíz_SAN LORENZO","Soja total_SAN LORENZO","Sorgo_SAN LORENZO","Trigo total_SAN LORENZO","Avena_SAN MARTIN","Cebada total_SAN MARTIN","Centeno_SAN MARTIN","Girasol_SAN MARTIN","Maíz_SAN MARTIN","Soja total_SAN MARTIN","Sorgo_SAN MARTIN","Trigo total_SAN MARTIN","Algodón_VERA","Avena_VERA","Girasol_VERA","Maíz_VERA","Soja total_VERA","Sorgo_VERA","Trigo total_VERA"],"parents":["Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","9 DE JULIO","9 DE JULIO","9 DE JULIO","9 DE JULIO","9 DE JULIO","9 DE JULIO","9 DE JULIO","BELGRANO","BELGRANO","BELGRANO","BELGRANO","BELGRANO","BELGRANO","BELGRANO","CASEROS","CASEROS","CASEROS","CASEROS","CASEROS","CASEROS","CASEROS","CASTELLANOS","CASTELLANOS","CASTELLANOS","CASTELLANOS","CASTELLANOS","CASTELLANOS","CASTELLANOS","CONSTITUCION","CONSTITUCION","CONSTITUCION","CONSTITUCION","CONSTITUCION","CONSTITUCION","CONSTITUCION","CONSTITUCION","GARAY","GARAY","GARAY","GARAY","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL OBLIGADO","GENERAL OBLIGADO","GENERAL OBLIGADO","GENERAL OBLIGADO","GENERAL OBLIGADO","GENERAL OBLIGADO","GENERAL OBLIGADO","IRIONDO","IRIONDO","IRIONDO","IRIONDO","IRIONDO","IRIONDO","LA CAPITAL","LA CAPITAL","LA CAPITAL","LA CAPITAL","LA CAPITAL","LA CAPITAL","LAS COLONIAS","LAS COLONIAS","LAS COLONIAS","LAS COLONIAS","LAS COLONIAS","LAS COLONIAS","LAS COLONIAS","ROSARIO","ROSARIO","ROSARIO","ROSARIO","ROSARIO","ROSARIO","ROSARIO","SAN CRISTOBAL","SAN CRISTOBAL","SAN CRISTOBAL","SAN CRISTOBAL","SAN CRISTOBAL","SAN CRISTOBAL","SAN CRISTOBAL","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN LORENZO","SAN LORENZO","SAN LORENZO","SAN LORENZO","SAN LORENZO","SAN LORENZO","SAN MARTIN","SAN MARTIN","SAN MARTIN","SAN MARTIN","SAN MARTIN","SAN MARTIN","SAN MARTIN","SAN MARTIN","VERA","VERA","VERA","VERA","VERA","VERA","VERA"],"values":[822600,1127600,1541017,1999437,1159655,90715,5036462,535935,1505450,148791,1404830,546155,1286031,148635,984050,780654,718009,2144771,181925,64400,0,51230,174240,269220,29760,233750,1081,6696,499,376250,530474,9100,203500,2520,0,2880,554490,759772,29475,191880,0,0,16440,431388,1030429,15680,505500,20340,0,5040,11400,335250,561055,9750,216820,75400,4935,9000,1380,750,22382,10260,600,20800,2332740,2024850,19500,604580,14400,1700,160185,153450,86490,31160,88550,1182,12660,533750,677818,6440,273600,0,5371,27750,81200,8820,25650,0,0,4226,370820,667804,9180,352800,12960,1440,14700,174445,196280,9800,136530,0,0,96442,375188,414891,63360,336150,3240,74200,750,15680,10005,20160,12600,12000,1980,8030,2048,8100,219000,449692,22200,273000,0,0,26518,564,343950,265702,20720,123200,1980,0,222755,323504,12600,157170,580,9248,0,8701,691250,982996,18200,433796,8400,840,32835,39200,48630,33620,18400],"hoverinfo":"label+value+percent parent+percent root","textinfo":"label+value+percent parent+percent root","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"treemap","branchvalues":"total","name":"","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["9 DE JULIO","BELGRANO","CASEROS","CASTELLANOS","CONSTITUCION","GARAY","GENERAL LOPEZ","GENERAL OBLIGADO","IRIONDO","LA CAPITAL","LAS COLONIAS","ROSARIO","SAN CRISTOBAL","SAN JAVIER","SAN JERONIMO","SAN JUSTO","SAN LORENZO","SAN MARTIN","VERA","Algodón_9 DE JULIO","Avena_9 DE JULIO","Girasol_9 DE JULIO","Maíz_9 DE JULIO","Soja total_9 DE JULIO","Sorgo_9 DE JULIO","Trigo total_9 DE JULIO","Avena_BELGRANO","Cebada total_BELGRANO","Centeno_BELGRANO","Maíz_BELGRANO","Soja total_BELGRANO","Sorgo_BELGRANO","Trigo total_BELGRANO","Arveja_CASEROS","Avena_CASEROS","Cebada total_CASEROS","Maíz_CASEROS","Soja total_CASEROS","Sorgo_CASEROS","Trigo total_CASEROS","Avena_CASTELLANOS","Cebada total_CASTELLANOS","Girasol_CASTELLANOS","Maíz_CASTELLANOS","Soja total_CASTELLANOS","Sorgo_CASTELLANOS","Trigo total_CASTELLANOS","Arveja_CONSTITUCION","Avena_CONSTITUCION","Cebada total_CONSTITUCION","Lenteja_CONSTITUCION","Maíz_CONSTITUCION","Soja total_CONSTITUCION","Sorgo_CONSTITUCION","Trigo total_CONSTITUCION","Arroz_GARAY","Maíz_GARAY","Soja total_GARAY","Sorgo_GARAY","Arveja_GENERAL LOPEZ","Avena_GENERAL LOPEZ","Cebada total_GENERAL LOPEZ","Girasol_GENERAL LOPEZ","Maní_GENERAL LOPEZ","Maíz_GENERAL LOPEZ","Soja total_GENERAL LOPEZ","Sorgo_GENERAL LOPEZ","Trigo total_GENERAL LOPEZ","Algodón_GENERAL OBLIGADO","Avena_GENERAL OBLIGADO","Girasol_GENERAL OBLIGADO","Maíz_GENERAL OBLIGADO","Soja total_GENERAL OBLIGADO","Sorgo_GENERAL OBLIGADO","Trigo total_GENERAL OBLIGADO","Avena_IRIONDO","Cebada total_IRIONDO","Maíz_IRIONDO","Soja total_IRIONDO","Sorgo_IRIONDO","Trigo total_IRIONDO","Avena_LA CAPITAL","Girasol_LA CAPITAL","Maíz_LA CAPITAL","Soja total_LA CAPITAL","Sorgo_LA CAPITAL","Trigo total_LA CAPITAL","Avena_LAS COLONIAS","Cebada total_LAS COLONIAS","Girasol_LAS COLONIAS","Maíz_LAS COLONIAS","Soja total_LAS COLONIAS","Sorgo_LAS COLONIAS","Trigo total_LAS COLONIAS","Arveja_ROSARIO","Cebada total_ROSARIO","Lenteja_ROSARIO","Maíz_ROSARIO","Soja total_ROSARIO","Sorgo_ROSARIO","Trigo total_ROSARIO","Avena_SAN CRISTOBAL","Cebada total_SAN CRISTOBAL","Girasol_SAN CRISTOBAL","Maíz_SAN CRISTOBAL","Soja total_SAN CRISTOBAL","Sorgo_SAN CRISTOBAL","Trigo total_SAN CRISTOBAL","Algodón_SAN JAVIER","Arroz_SAN JAVIER","Avena_SAN JAVIER","Girasol_SAN JAVIER","Maíz_SAN JAVIER","Soja total_SAN JAVIER","Sorgo_SAN JAVIER","Trigo total_SAN JAVIER","Arveja_SAN JERONIMO","Avena_SAN JERONIMO","Cebada total_SAN JERONIMO","Girasol_SAN JERONIMO","Maíz_SAN JERONIMO","Soja total_SAN JERONIMO","Sorgo_SAN JERONIMO","Trigo total_SAN JERONIMO","Avena_SAN JUSTO","Cebada total_SAN JUSTO","Girasol_SAN JUSTO","Lenteja_SAN JUSTO","Maíz_SAN JUSTO","Soja total_SAN JUSTO","Sorgo_SAN JUSTO","Trigo total_SAN JUSTO","Arveja_SAN LORENZO","Avena_SAN LORENZO","Maíz_SAN LORENZO","Soja total_SAN LORENZO","Sorgo_SAN LORENZO","Trigo total_SAN LORENZO","Avena_SAN MARTIN","Cebada total_SAN MARTIN","Centeno_SAN MARTIN","Girasol_SAN MARTIN","Maíz_SAN MARTIN","Soja total_SAN MARTIN","Sorgo_SAN MARTIN","Trigo total_SAN MARTIN","Algodón_VERA","Avena_VERA","Girasol_VERA","Maíz_VERA","Soja total_VERA","Sorgo_VERA","Trigo total_VERA"],"parents":["Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","9 DE JULIO","9 DE JULIO","9 DE JULIO","9 DE JULIO","9 DE JULIO","9 DE JULIO","9 DE JULIO","BELGRANO","BELGRANO","BELGRANO","BELGRANO","BELGRANO","BELGRANO","BELGRANO","CASEROS","CASEROS","CASEROS","CASEROS","CASEROS","CASEROS","CASEROS","CASTELLANOS","CASTELLANOS","CASTELLANOS","CASTELLANOS","CASTELLANOS","CASTELLANOS","CASTELLANOS","CONSTITUCION","CONSTITUCION","CONSTITUCION","CONSTITUCION","CONSTITUCION","CONSTITUCION","CONSTITUCION","CONSTITUCION","GARAY","GARAY","GARAY","GARAY","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL OBLIGADO","GENERAL OBLIGADO","GENERAL OBLIGADO","GENERAL OBLIGADO","GENERAL OBLIGADO","GENERAL OBLIGADO","GENERAL OBLIGADO","IRIONDO","IRIONDO","IRIONDO","IRIONDO","IRIONDO","IRIONDO","LA CAPITAL","LA CAPITAL","LA CAPITAL","LA CAPITAL","LA CAPITAL","LA CAPITAL","LAS COLONIAS","LAS COLONIAS","LAS COLONIAS","LAS COLONIAS","LAS COLONIAS","LAS COLONIAS","LAS COLONIAS","ROSARIO","ROSARIO","ROSARIO","ROSARIO","ROSARIO","ROSARIO","ROSARIO","SAN CRISTOBAL","SAN CRISTOBAL","SAN CRISTOBAL","SAN CRISTOBAL","SAN CRISTOBAL","SAN CRISTOBAL","SAN CRISTOBAL","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN LORENZO","SAN LORENZO","SAN LORENZO","SAN LORENZO","SAN LORENZO","SAN LORENZO","SAN MARTIN","SAN MARTIN","SAN MARTIN","SAN MARTIN","SAN MARTIN","SAN MARTIN","SAN MARTIN","SAN MARTIN","VERA","VERA","VERA","VERA","VERA","VERA","VERA"],"values":[822600,1127600,1541017,1999437,1159655,90715,5036462,535935,1505450,148791,1404830,546155,1286031,148635,984050,780654,718009,2144771,181925,64400,0,51230,174240,269220,29760,233750,1081,6696,499,376250,530474,9100,203500,2520,0,2880,554490,759772,29475,191880,0,0,16440,431388,1030429,15680,505500,20340,0,5040,11400,335250,561055,9750,216820,75400,4935,9000,1380,750,22382,10260,600,20800,2332740,2024850,19500,604580,14400,1700,160185,153450,86490,31160,88550,1182,12660,533750,677818,6440,273600,0,5371,27750,81200,8820,25650,0,0,4226,370820,667804,9180,352800,12960,1440,14700,174445,196280,9800,136530,0,0,96442,375188,414891,63360,336150,3240,74200,750,15680,10005,20160,12600,12000,1980,8030,2048,8100,219000,449692,22200,273000,0,0,26518,564,343950,265702,20720,123200,1980,0,222755,323504,12600,157170,580,9248,0,8701,691250,982996,18200,433796,8400,840,32835,39200,48630,33620,18400],"hoverinfo":["label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root"],"textinfo":"label+value+percent parent+percent root","type":"treemap","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null},{"labels":["9 DE JULIO","BELGRANO","CASEROS","CASTELLANOS","CONSTITUCION","GARAY","GENERAL LOPEZ","GENERAL OBLIGADO","IRIONDO","LA CAPITAL","LAS COLONIAS","ROSARIO","SAN CRISTOBAL","SAN JAVIER","SAN JERONIMO","SAN JUSTO","SAN LORENZO","SAN MARTIN","VERA","Algodón_9 DE JULIO","Avena_9 DE JULIO","Girasol_9 DE JULIO","Maíz_9 DE JULIO","Soja total_9 DE JULIO","Sorgo_9 DE JULIO","Trigo total_9 DE JULIO","Avena_BELGRANO","Cebada total_BELGRANO","Centeno_BELGRANO","Maíz_BELGRANO","Soja total_BELGRANO","Sorgo_BELGRANO","Trigo total_BELGRANO","Arveja_CASEROS","Avena_CASEROS","Cebada total_CASEROS","Maíz_CASEROS","Soja total_CASEROS","Sorgo_CASEROS","Trigo total_CASEROS","Avena_CASTELLANOS","Cebada total_CASTELLANOS","Girasol_CASTELLANOS","Maíz_CASTELLANOS","Soja total_CASTELLANOS","Sorgo_CASTELLANOS","Trigo total_CASTELLANOS","Arveja_CONSTITUCION","Avena_CONSTITUCION","Cebada total_CONSTITUCION","Lenteja_CONSTITUCION","Maíz_CONSTITUCION","Soja total_CONSTITUCION","Sorgo_CONSTITUCION","Trigo total_CONSTITUCION","Arroz_GARAY","Maíz_GARAY","Soja total_GARAY","Sorgo_GARAY","Arveja_GENERAL LOPEZ","Avena_GENERAL LOPEZ","Cebada total_GENERAL LOPEZ","Girasol_GENERAL LOPEZ","Maní_GENERAL LOPEZ","Maíz_GENERAL LOPEZ","Soja total_GENERAL LOPEZ","Sorgo_GENERAL LOPEZ","Trigo total_GENERAL LOPEZ","Algodón_GENERAL OBLIGADO","Avena_GENERAL OBLIGADO","Girasol_GENERAL OBLIGADO","Maíz_GENERAL OBLIGADO","Soja total_GENERAL OBLIGADO","Sorgo_GENERAL OBLIGADO","Trigo total_GENERAL OBLIGADO","Avena_IRIONDO","Cebada total_IRIONDO","Maíz_IRIONDO","Soja total_IRIONDO","Sorgo_IRIONDO","Trigo total_IRIONDO","Avena_LA CAPITAL","Girasol_LA CAPITAL","Maíz_LA CAPITAL","Soja total_LA CAPITAL","Sorgo_LA CAPITAL","Trigo total_LA CAPITAL","Avena_LAS COLONIAS","Cebada total_LAS COLONIAS","Girasol_LAS COLONIAS","Maíz_LAS COLONIAS","Soja total_LAS COLONIAS","Sorgo_LAS COLONIAS","Trigo total_LAS COLONIAS","Arveja_ROSARIO","Cebada total_ROSARIO","Lenteja_ROSARIO","Maíz_ROSARIO","Soja total_ROSARIO","Sorgo_ROSARIO","Trigo total_ROSARIO","Avena_SAN CRISTOBAL","Cebada total_SAN CRISTOBAL","Girasol_SAN CRISTOBAL","Maíz_SAN CRISTOBAL","Soja total_SAN CRISTOBAL","Sorgo_SAN CRISTOBAL","Trigo total_SAN CRISTOBAL","Algodón_SAN JAVIER","Arroz_SAN JAVIER","Avena_SAN JAVIER","Girasol_SAN JAVIER","Maíz_SAN JAVIER","Soja total_SAN JAVIER","Sorgo_SAN JAVIER","Trigo total_SAN JAVIER","Arveja_SAN JERONIMO","Avena_SAN JERONIMO","Cebada total_SAN JERONIMO","Girasol_SAN JERONIMO","Maíz_SAN JERONIMO","Soja total_SAN JERONIMO","Sorgo_SAN JERONIMO","Trigo total_SAN JERONIMO","Avena_SAN JUSTO","Cebada total_SAN JUSTO","Girasol_SAN JUSTO","Lenteja_SAN JUSTO","Maíz_SAN JUSTO","Soja total_SAN JUSTO","Sorgo_SAN JUSTO","Trigo total_SAN JUSTO","Arveja_SAN LORENZO","Avena_SAN LORENZO","Maíz_SAN LORENZO","Soja total_SAN LORENZO","Sorgo_SAN LORENZO","Trigo total_SAN LORENZO","Avena_SAN MARTIN","Cebada total_SAN MARTIN","Centeno_SAN MARTIN","Girasol_SAN MARTIN","Maíz_SAN MARTIN","Soja total_SAN MARTIN","Sorgo_SAN MARTIN","Trigo total_SAN MARTIN","Algodón_VERA","Avena_VERA","Girasol_VERA","Maíz_VERA","Soja total_VERA","Sorgo_VERA","Trigo total_VERA"],"parents":["Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","Total Santa Fe","9 DE JULIO","9 DE JULIO","9 DE JULIO","9 DE JULIO","9 DE JULIO","9 DE JULIO","9 DE JULIO","BELGRANO","BELGRANO","BELGRANO","BELGRANO","BELGRANO","BELGRANO","BELGRANO","CASEROS","CASEROS","CASEROS","CASEROS","CASEROS","CASEROS","CASEROS","CASTELLANOS","CASTELLANOS","CASTELLANOS","CASTELLANOS","CASTELLANOS","CASTELLANOS","CASTELLANOS","CONSTITUCION","CONSTITUCION","CONSTITUCION","CONSTITUCION","CONSTITUCION","CONSTITUCION","CONSTITUCION","CONSTITUCION","GARAY","GARAY","GARAY","GARAY","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL LOPEZ","GENERAL OBLIGADO","GENERAL OBLIGADO","GENERAL OBLIGADO","GENERAL OBLIGADO","GENERAL OBLIGADO","GENERAL OBLIGADO","GENERAL OBLIGADO","IRIONDO","IRIONDO","IRIONDO","IRIONDO","IRIONDO","IRIONDO","LA CAPITAL","LA CAPITAL","LA CAPITAL","LA CAPITAL","LA CAPITAL","LA CAPITAL","LAS COLONIAS","LAS COLONIAS","LAS COLONIAS","LAS COLONIAS","LAS COLONIAS","LAS COLONIAS","LAS COLONIAS","ROSARIO","ROSARIO","ROSARIO","ROSARIO","ROSARIO","ROSARIO","ROSARIO","SAN CRISTOBAL","SAN CRISTOBAL","SAN CRISTOBAL","SAN CRISTOBAL","SAN CRISTOBAL","SAN CRISTOBAL","SAN CRISTOBAL","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JAVIER","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JERONIMO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN JUSTO","SAN LORENZO","SAN LORENZO","SAN LORENZO","SAN LORENZO","SAN LORENZO","SAN LORENZO","SAN MARTIN","SAN MARTIN","SAN MARTIN","SAN MARTIN","SAN MARTIN","SAN MARTIN","SAN MARTIN","SAN MARTIN","VERA","VERA","VERA","VERA","VERA","VERA","VERA"],"values":[822600,1127600,1541017,1999437,1159655,90715,5036462,535935,1505450,148791,1404830,546155,1286031,148635,984050,780654,718009,2144771,181925,64400,0,51230,174240,269220,29760,233750,1081,6696,499,376250,530474,9100,203500,2520,0,2880,554490,759772,29475,191880,0,0,16440,431388,1030429,15680,505500,20340,0,5040,11400,335250,561055,9750,216820,75400,4935,9000,1380,750,22382,10260,600,20800,2332740,2024850,19500,604580,14400,1700,160185,153450,86490,31160,88550,1182,12660,533750,677818,6440,273600,0,5371,27750,81200,8820,25650,0,0,4226,370820,667804,9180,352800,12960,1440,14700,174445,196280,9800,136530,0,0,96442,375188,414891,63360,336150,3240,74200,750,15680,10005,20160,12600,12000,1980,8030,2048,8100,219000,449692,22200,273000,0,0,26518,564,343950,265702,20720,123200,1980,0,222755,323504,12600,157170,580,9248,0,8701,691250,982996,18200,433796,8400,840,32835,39200,48630,33620,18400],"hoverinfo":["label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root"],"textinfo":"label+value+percent parent+percent root","type":"treemap","branchvalues":"total","name":"","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<ul>
<li><p>Moviendo el <em>mouse</em> sobre el treemap, podemos enterarnos que, por ejemplo, la producción del departamento Rosario representa sólo el 2% del total provincial.</p></li>
<li><p>Haciendo click en Rosario, observamos que de las 546.155 toneladas producidas allí, el 36% corresponde a soja, lo que equivale al 1% de la producción de Santa Fe (abarcando todos los cultivos).</p></li>
</ul>
</section>
<section id="ejercicio-1" class="level3" data-number="7.6.2">
<h3 data-number="7.6.2" class="anchored" data-anchor-id="ejercicio-1"><span class="header-section-number">7.6.2</span> Ejercicio</h3>
<ul>
<li>Tomar los datos del Titanic y tratar de replicar este treemap dinámico que muestra los porcentajes de supervivencia según la clase en la que viajaba cada pasajero:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-87dd079b60bf8f0f8bc6" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-87dd079b60bf8f0f8bc6">{"x":{"visdat":{"48fc1a865178":["function () ","plotlyVisDat"]},"cur_data":"48fc1a865178","attrs":{"48fc1a865178":{"labels":["1st","2nd","3rd","Crew","No Sobrevivió_1st","Sobrevivió_1st","No Sobrevivió_2nd","Sobrevivió_2nd","No Sobrevivió_3rd","Sobrevivió_3rd","No Sobrevivió_Crew","Sobrevivió_Crew"],"parents":["Total Titanic","Total Titanic","Total Titanic","Total Titanic","1st","1st","2nd","2nd","3rd","3rd","Crew","Crew"],"values":[325,285,706,885,122,203,167,118,528,178,673,212],"hoverinfo":"label+value+percent parent+percent root","textinfo":"label+value+percent parent+percent root","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"treemap"},"48fc1a865178.1":{"labels":["1st","2nd","3rd","Crew","No Sobrevivió_1st","Sobrevivió_1st","No Sobrevivió_2nd","Sobrevivió_2nd","No Sobrevivió_3rd","Sobrevivió_3rd","No Sobrevivió_Crew","Sobrevivió_Crew"],"parents":["Total Titanic","Total Titanic","Total Titanic","Total Titanic","1st","1st","2nd","2nd","3rd","3rd","Crew","Crew"],"values":[325,285,706,885,122,203,167,118,528,178,673,212],"hoverinfo":"label+value+percent parent+percent root","textinfo":"label+value+percent parent+percent root","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"treemap","branchvalues":"total","name":"","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["1st","2nd","3rd","Crew","No Sobrevivió_1st","Sobrevivió_1st","No Sobrevivió_2nd","Sobrevivió_2nd","No Sobrevivió_3rd","Sobrevivió_3rd","No Sobrevivió_Crew","Sobrevivió_Crew"],"parents":["Total Titanic","Total Titanic","Total Titanic","Total Titanic","1st","1st","2nd","2nd","3rd","3rd","Crew","Crew"],"values":[325,285,706,885,122,203,167,118,528,178,673,212],"hoverinfo":["label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root"],"textinfo":"label+value+percent parent+percent root","type":"treemap","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null},{"labels":["1st","2nd","3rd","Crew","No Sobrevivió_1st","Sobrevivió_1st","No Sobrevivió_2nd","Sobrevivió_2nd","No Sobrevivió_3rd","Sobrevivió_3rd","No Sobrevivió_Crew","Sobrevivió_Crew"],"parents":["Total Titanic","Total Titanic","Total Titanic","Total Titanic","1st","1st","2nd","2nd","3rd","3rd","Crew","Crew"],"values":[325,285,706,885,122,203,167,118,528,178,673,212],"hoverinfo":["label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root","label+value+percent parent+percent root"],"textinfo":"label+value+percent parent+percent root","type":"treemap","branchvalues":"total","name":"","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
<section id="diagramas-de-venn" class="level2" data-number="7.7">
<h2 data-number="7.7" class="anchored" data-anchor-id="diagramas-de-venn"><span class="header-section-number">7.7</span> Diagramas de Venn</h2>
<ul>
<li><p>Los diagramas de Venn son un tipo de gráfico útil para mostrar visualmente relaciones lógicas (unión, intersección, complemento, etc.) entre los elementos de diferentes conjuntos.</p></li>
<li><p>Pueden ser utilizados de dos maneras:</p>
<ul>
<li>Para contabilizar la cantidad de observaciones que presentan (o no) 2 o más características de interés. En este caso su objetivo es el de visualizar proporciones anidadas, con lo cual puede tomarse como una alternativa a los gráficos presentados anteriormente para tal fin: mosaicos, treemaps y alluvial.</li>
<li>Para mostrar específicamente qué individuos poseen (o no) 2 o más características de interés. En este caso no nos interesa comparar cantidades ni proporciones, sino cuáles son las observaciones que figuran en cada región.</li>
</ul></li>
</ul>
<section id="proporciones-anidadas" class="level3" data-number="7.7.1">
<h3 data-number="7.7.1" class="anchored" data-anchor-id="proporciones-anidadas"><span class="header-section-number">7.7.1</span> Proporciones anidadas</h3>
<ul>
<li>Empleamos el paquete <code>VennDiagram</code> para mostrar qué porcentaje de los cultivos verifican las siguientes 3 condiciones: la superficie sembrada es mayor a 1000 hectáreas, la producción obtenida es menor a 1500 toneladas, y el rendimiento es mayor a 2000 kg. por hectárea.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(grid)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(VennDiagram)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Creamos un dataset sin datos faltantes</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>cultivos_sinNA <span class="ot">&lt;-</span> cultivos <span class="sc">%&gt;%</span> </span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">is.na</span>(sup_cosechada),</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">is.na</span>(prod),</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">is.na</span>(rend)</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a><span class="co">#Armamos una lista con individuos que verifican las 3 condiciones a comparar</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>lista <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">grupo1 =</span> <span class="fu">which</span>(cultivos_sinNA<span class="sc">$</span>sup_sembrada <span class="sc">&gt;</span> <span class="dv">1000</span>),</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">grupo2 =</span> <span class="fu">which</span>(cultivos_sinNA<span class="sc">$</span>prod <span class="sc">&lt;</span> <span class="dv">1500</span>),</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">grupo3 =</span> <span class="fu">which</span>(cultivos_sinNA<span class="sc">$</span>rend <span class="sc">&gt;</span> <span class="dv">2000</span>)</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a><span class="co">#Generamos diagrama de Venn</span></span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>diagrama <span class="ot">&lt;-</span> <span class="fu">venn.diagram</span>(</span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> lista,</span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">category.names =</span> <span class="fu">c</span>(</span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sup. &gt; 1000 ha."</span>, </span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Prod. &lt; 1500 tn."</span>, </span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rendimiento &gt; 2000 kg. por ha."</span></span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill =</span> <span class="fu">c</span>(<span class="st">"red"</span>, <span class="st">"blue"</span>, <span class="st">"green"</span>),</span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">filename =</span> <span class="cn">NULL</span>,</span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">print.mode =</span> <span class="st">"percent"</span> <span class="co">#para ver % en vez de cantidades</span></span>
<span id="cb38-30"><a href="#cb38-30" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb38-31"><a href="#cb38-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-32"><a href="#cb38-32" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.draw</span>(diagrama)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-36-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-23"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="características-compartidas-entre-individuos" class="level3" data-number="7.7.2">
<h3 data-number="7.7.2" class="anchored" data-anchor-id="características-compartidas-entre-individuos"><span class="header-section-number">7.7.2</span> Características compartidas entre individuos</h3>
<ul>
<li>En este caso usamos el paquete <code>ggvenn</code>, una extensión de <code>ggplot2</code>, para hacer un diagrama clásico de Venn que compara un conjunto de individuos según 2 variables:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggvenn)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>lista <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  Fútbol <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Argentina"</span>, <span class="st">"Alemania"</span>, <span class="st">"Uruguay"</span>, <span class="st">"Brasil"</span>, </span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>             <span class="st">"España"</span>, <span class="st">"Italia"</span>, <span class="st">"Inglaterra"</span>, <span class="st">"Francia"</span>), </span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Basket =</span> <span class="fu">c</span>(<span class="st">"Argentina"</span>, <span class="st">"Alemania"</span>, <span class="st">"Brasil"</span>, <span class="st">"España"</span>, </span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>              <span class="st">"Estados Unidos"</span>, <span class="st">"Unión Soviética"</span>, <span class="st">"Yugoslavia"</span>)</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggvenn</span>(</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> lista, </span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">fill_color =</span> <span class="fu">c</span>(<span class="st">"red"</span>, <span class="st">"blue"</span>), </span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">show_elements =</span> <span class="cn">TRUE</span>,</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">label_sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">text_size =</span> <span class="dv">5</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Campeones Mundiales de...</span><span class="sc">\n</span><span class="st">"</span>) <span class="sc">+</span></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-37-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-24"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="nubes-de-palabras" class="level2" data-number="7.8">
<h2 data-number="7.8" class="anchored" data-anchor-id="nubes-de-palabras"><span class="header-section-number">7.8</span> Nubes de Palabras</h2>
<ul>
<li><p>En los últimos tiempos se han desarrollado herramientas muy interesantes y sofisticadas para el trabajo con datos de tipo textual. En esta sección veremos dos de ellas, que suelen estar presentes en análisis exploratorios iniciales del conjunto de documentos analizados:</p>
<ul>
<li>Estudio de las <strong>frecuencias</strong> de palabras: se contabiliza cuántas veces aparece cada palabra para poder identificar a las más frecuentes. Los resultados suelen representarse en las llamadas <strong>nubes de palabras</strong>, las cuales generan una visualización atractiva de los vocablos presentes.</li>
<li>Estudio de la <strong>co-ocurrencia</strong> de palabras: se estudia la asociación que puede haber entre palabras mediante el análisis de cuántas veces aparecen juntas (o no) en los documentos. Los resultados suelen representarse en <strong>grafos</strong>.</li>
</ul></li>
<li><p>Ambos tipos de análisis pueden utilizarse para comparar grupos de documentos, por ejemplo de distintos autores, diferentes estilos literarios, etc.</p></li>
<li><p>Vamos a ejemplificar el uso de estas herramientas analizando <em>tweets</em> (posteos en la red social Twitter, ahora conocida como <strong>X</strong>). En particular, nos concentraremos en tweets que incluyan el hashtag <code>#messi</code> publicados entre el 9 y el 13 de diciembre de 2022.</p></li>
<li><p>La descarga de la base se realizó el día 13/12/2022, después del partido entre Argentina y Croacia por las semifinales del Mundial de Fútbol de Qatar, en el que nuestra selección ganó por 3 a 0.</p></li>
<li><p>Para obtener estos datos se utilizó el paquete de R <code>rtweet</code>, el cual se conecta con la API de Twitter y permite descargar tweets que coincidan con los criterios de búsqueda que nos interesen. Desde que Elon Musk compró Twitter, el acceso a la API se encuentra restringido y el paquete <code>rtweet</code> ha dejado de funcionar, por lo que hoy en día no es tan sencillo acceder a este tipo de información libremente.</p></li>
<li><p>Una vez descargados los tweets es necesario someterlos a un extenso proceso de depuración, el cual incluye filtrado de <em>spam</em>, unificación de criterios de escritura de palabras, borrado de términos no importantes (artículos, preposiciones, conectores, etc.) y muchas otras cuestiones relativas a la <strong>limpieza de la base</strong>.</p></li>
<li><p>El resultado de este proceso se encuentra almacenado en el archivo <code>tweets.RData</code>, el cual contiene información sobre más de 15.000 tweets con el hashtag <code>#messi</code> publicados en las fechas mencionadas. Sus primeras 10 filas lucen así:</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"../data/unidad03/tweets.RData"</span>)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tweets, <span class="dv">10</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 7
   id      created_at          text  retweet_count favorite_count source limpios
   &lt;chr&gt;   &lt;dttm&gt;              &lt;chr&gt;         &lt;int&gt;          &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;  
 1 160127… 2022-12-09 18:02:24 "Aho…             0              0 Twitt… ahora …
 2 160127… 2022-12-09 18:02:36 "Vam…             0              0 Twitt… vamos …
 3 160127… 2022-12-09 18:02:44 "Que…             0              1 Twitt… gane e…
 4 160127… 2022-12-09 18:02:52 "Ser…             0              0 Twitt… sera v…
 5 160127… 2022-12-09 18:02:59 "#Me…             0              0 Twitt… merece…
 6 160127… 2022-12-09 18:03:07 "Que…             1              1 Twitt… quedam…
 7 160127… 2022-12-09 18:03:10 "Sol…             0              0 Twitt… solo q…
 8 160127… 2022-12-09 18:03:12 "@Ma…             0              0 Twitt… result…
 9 160127… 2022-12-09 18:03:27 "Tra…             0              6 Twitt… tranqu…
10 160127… 2022-12-09 18:03:48 "Tod…             0              0 Twitt… puesto…</code></pre>
</div>
</div>
<section id="frecuencias-y-nubes-de-palabras" class="level3" data-number="7.8.1">
<h3 data-number="7.8.1" class="anchored" data-anchor-id="frecuencias-y-nubes-de-palabras"><span class="header-section-number">7.8.1</span> Frecuencias y nubes de palabras</h3>
<ul>
<li>Vamos a detectar cuáles son las palabras más frecuentes en esta base. Mediante la función <code>unnest_tokens()</code> del paquete <code>tidytext</code> extraemos las palabras que componen cada tweet y ubicamos cada una de ellas en las filas de un nuevo dataset. Luego agregamos su frecuencia absoluta y nos quedamos con aquellos términos con al menos 4 caracteres:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>frecuencias <span class="ot">&lt;-</span> tweets <span class="sc">%&gt;%</span> </span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(palabras, limpios) <span class="sc">%&gt;%</span> </span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(palabras, <span class="at">sort =</span> <span class="cn">TRUE</span>, <span class="at">name =</span> <span class="st">"frec"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">nchar</span>(palabras) <span class="sc">&gt;</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>frec)</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>frecuencias</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,340 × 2
   palabras   frec
   &lt;chr&gt;     &lt;int&gt;
 1 argentina  2355
 2 messi      2044
 3 vamos      1340
 4 mundial    1132
 5 bobo       1117
 6 mundo       882
 7 mejor       839
 8 partido     837
 9 futbol      741
10 final       721
# ℹ 16,330 more rows</code></pre>
</div>
</div>
<p>
</p>
<ul>
<li><p>Para comparar las frecuencias de estos términos podríamos emplear un gráfico de barras, pero en este caso optamos por una <strong>nube de palabras</strong>. La idea de ambas visualizaciones es la misma: representar palabras en un gráfico, donde el tamaño o color de cada una depende de cierta variable numérica (generalmente la frecuencia relativa o absoluta de la palabra dentro del texto analizado).</p></li>
<li><p>Para crear una nube de palabras con nuestro ejemplo usamos el paquete <code>ggwordcloud</code>. Se incluyen únicamente aquellos términos que hayan aparecido más de 100 veces:</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggwordcloud)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>frecuencias <span class="sc">%&gt;%</span> </span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(frec <span class="sc">&gt;</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">label =</span> palabras, <span class="at">size =</span> frec, <span class="at">color =</span> frec) <span class="sc">+</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_wordcloud</span>(<span class="at">eccentricity =</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="co">#forma de la elipse</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_area</span>(<span class="at">max_size =</span> <span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">low =</span> <span class="st">"red"</span>, <span class="at">high =</span> <span class="st">"darkred"</span>) <span class="sc">+</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-41-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-25"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="co-ocurrencia-asociación-entre-palabras-y-grafos" class="level3" data-number="7.8.2">
<h3 data-number="7.8.2" class="anchored" data-anchor-id="co-ocurrencia-asociación-entre-palabras-y-grafos"><span class="header-section-number">7.8.2</span> Co-ocurrencia, asociación entre palabras y grafos</h3>
<ul>
<li><p>Otro análisis básico para datos textuales consiste en identificar cuáles son los pares de palabras que aparecen juntas frecuentemente (no necesariamente una después de la otra, sino en los mismos documentos).</p></li>
<li><p>Para contar la cantidad de tweets en donde aparece cada par de palabras, vamos a valernos del paquete <code>widyr</code> y la función <code>pairwise_count()</code>:</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>palabras_tweet <span class="ot">&lt;-</span> tweets <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, limpios) <span class="sc">%&gt;%</span> </span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(palabras, limpios) <span class="sc">%&gt;%</span> </span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">nchar</span>(palabras) <span class="sc">&gt;</span> <span class="dv">3</span>)</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>pares_frec <span class="ot">&lt;-</span> <span class="fu">pairwise_count</span>(palabras_tweet, palabras, id, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>pares_frec</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 756,550 × 3
   item1     item2         n
   &lt;chr&gt;     &lt;chr&gt;     &lt;dbl&gt;
 1 miras     bobo        472
 2 bobo      miras       472
 3 argentina vamos       445
 4 vamos     argentina   445
 5 messi     argentina   433
 6 argentina messi       433
 7 bajos     paises      429
 8 paises    bajos       429
 9 bobo      anda        353
10 anda      bobo        353
# ℹ 756,540 more rows</code></pre>
</div>
</div>
<ul>
<li><p>Los binomios más comunes son “miras bobo” (de la famosa frase de Messi, <em>qué mirás bobo, andá pa’ allá bobo</em>), “vamos argentina”, “paises bajos”, etc.</p></li>
<li><p>Podemos buscar palabras de nuestro interés para saber con qué términos se asocian frecuentemente:</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(pares_frec, item1 <span class="sc">==</span> <span class="st">"dibu"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 887 × 3
   item1 item2           n
   &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;
 1 dibu  martinez       66
 2 dibu  messi          54
 3 dibu  argentina      51
 4 dibu  penales        24
 5 dibu  gracias        23
 6 dibu  semifinales    23
 7 dibu  vamos          19
 8 dibu  seleccion      18
 9 dibu  paises         17
10 dibu  bajos          17
# ℹ 877 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(pares_frec, item1 <span class="sc">==</span> <span class="st">"scaloneta"</span>) </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 291 × 3
   item1     item2         n
   &lt;chr&gt;     &lt;chr&gt;     &lt;dbl&gt;
 1 scaloneta argentina    19
 2 scaloneta vamos        15
 3 scaloneta seleccion     9
 4 scaloneta mundo         7
 5 scaloneta messi         6
 6 scaloneta final         5
 7 scaloneta qatar         5
 8 scaloneta juega         5
 9 scaloneta mundial       4
10 scaloneta pase          4
# ℹ 281 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(pares_frec, item1 <span class="sc">==</span> <span class="st">"muchachos"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 409 × 3
   item1     item2         n
   &lt;chr&gt;     &lt;chr&gt;     &lt;dbl&gt;
 1 muchachos vamos        30
 2 muchachos argentina    23
 3 muchachos gracias      20
 4 muchachos ilusionar    19
 5 muchachos volvimos     18
 6 muchachos ahora        14
 7 muchachos mundial      11
 8 muchachos campeon      11
 9 muchachos quiero       10
10 muchachos ganar         9
# ℹ 399 more rows</code></pre>
</div>
</div>
<p>
</p>
<ul>
<li><p>Un par de palabras que ocurren muchas veces juntas podrían no estar específicamente asociadas entre sí, sobre todo si una de ellas posee alta frecuencia en términos generales (por ej., arriba vimos que la palabra <em>argentina</em> aparece muy asociada a <em>dibu</em>, <em>scaloneta</em> y <em>muchachos</em>).</p></li>
<li><p>Para saber qué par de palabras se asocian entre sí, <strong>pero generalmente a ninguna otra</strong>, se emplea un coeficiente de asociación entre variables binarias llamado <span class="math inline">\(\phi\)</span>.</p></li>
<li><p>Podemos calcular este coeficiente para cada par de palabras con la función <code>pairwise_cor()</code>.</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>pares_corr <span class="ot">&lt;-</span> palabras_tweet <span class="sc">%&gt;%</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(palabras) <span class="sc">%&gt;%</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>() <span class="sc">&gt;=</span> <span class="dv">20</span>) <span class="sc">%&gt;%</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pairwise_cor</span>(palabras, id, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(pares_corr, item1 <span class="sc">==</span> <span class="st">"muchachos"</span>) </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 881 × 3
   item1     item2     correlation
   &lt;chr&gt;     &lt;chr&gt;           &lt;dbl&gt;
 1 muchachos ilusionar      0.356 
 2 muchachos volvimos       0.355 
 3 muchachos tercera        0.159 
 4 muchachos podemos        0.100 
 5 muchachos gracias        0.0889
 6 muchachos cielo          0.0822
 7 muchachos vamos          0.0766
 8 muchachos felices        0.0694
 9 muchachos campeon        0.0592
10 muchachos ahora          0.0565
# ℹ 871 more rows</code></pre>
</div>
</div>
<p>
</p>
<ul>
<li><p>Arriba apreciamos las palabras que mayor correlación poseen con <em>muchachos</em>: desaparecieron términos genéricos como <em>vamos</em> o <em>argentina</em>, pero se mantuvieron palabras como <em>volvimos</em> o <em>ilusionar</em>. Esto se debe a que estas últimas generalmente sólo aparecen cuando alguien escribe la letra de la famosa canción, y no resultan tan comunes en otros contextos.</p></li>
<li><p>Una visualización interesante de toda esta información se logra con un <strong>grafo</strong>, el cual se define como una red de nodos conectados. En este caso, cada palabra es un nodo.</p></li>
<li><p>La línea que une dos nodos representa la asociación entre las correspondientes palabras: a mayor oscuridad en la línea, mayor es la fuerza de asociación; palabras no conectadas no están asociadas.</p></li>
<li><p>Para esta tarea hacemos uso de los paquetes <code>igraph</code> y <code>ggraph</code>:</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2022</span>)</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>pares_corr <span class="sc">%&gt;%</span> </span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(correlation <span class="sc">&gt;</span> <span class="fl">0.2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">graph_from_data_frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggraph</span>(<span class="at">layout =</span> <span class="st">"fr"</span>) <span class="sc">+</span> <span class="co"># Algoritmo de Fruchterman-Reingold para posicionar los nodos</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_link</span>(<span class="fu">aes</span>(<span class="at">edge_alpha =</span> correlation), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_point</span>(<span class="at">color =</span> <span class="st">"skyblue"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> name), <span class="at">repel =</span> <span class="cn">TRUE</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-45-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-26"><img src="03_visualizacion_variables_cualitativas_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="2100"></a></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled" title="Importante">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Importante
</div>
</div>
<div class="callout-body-container callout-body">
<p>Parte del material sobre nubes de palabras y grafos es de la autoría del Prof.&nbsp;Marcos Prunello.</p>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../capitulos/03_georreferencia.html" class="pagination-link" aria-label="Georreferencia">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Georreferencia</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../capitulos/04.html" class="pagination-link" aria-label="Unidad 4. Cuanti">
        <span class="nav-page-text">Unidad 4. Cuanti</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Developed by Diego Marfetán Molina and Ivan Millanes</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/ee-unr/aed/edit/main/capitulos/03_visualizacion_variables_cualitativas.qmd" class="toc-action"><i class="bi bi-github"></i>Editar esta página</a></li><li><a href="https://github.com/ee-unr/aed/issues/new" class="toc-action"><i class="bi empty"></i>Informar de un problema</a></li><li><a href="https://github.com/ee-unr/aed/blob/main/capitulos/03_visualizacion_variables_cualitativas.qmd" class="toc-action"><i class="bi empty"></i>Ver el código</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>